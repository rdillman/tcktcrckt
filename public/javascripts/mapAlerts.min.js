var LAST_CNN="";function login(){location.replace("/alert/show");return!0}
function makeAlert(a,b){cA=$("#currentAlarms");jQuery.ajaxSetup({beforeSend:function(b){b.setRequestHeader("Accept","text/html")}});$.get("/alert/make_new_alert?cnn="+a+"&side="+b,function(b){if(b[0]==="$"){var a=b.split("$"),b=a[1],a=a[2];/currently/i.test(cA.html())?cA.html(a):cA.prepend(a);$("#kill"+b).button();$("#accordion").accordion("option","active",1)}else $("#infoBox").html("oops something went wrong"),$("#accordion").accordion("option","active",0)});return!1}
function showAlerts(){jQuery.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Accept","text/html")}});$.get("/alert/show_alerts_on_map",function(a){if(a[0]=="#")for(var a=a.split("#"),b=a.length,d=1;d<b;d++){var c=a[d].split("$"),e=c[0];$("#currentAlarms").prepend(c[1]);$("#kill"+e).button()}else a!=""?$("#currentAlarms").html(a):$("#currentAlarms").html("Oops something went wrong.<br/> We are working on fixing that now")});return!1}
function killAlert(a){$("#alarm"+a).attr("onclick","");jQuery.ajaxSetup({beforeSend:function(b){b.setRequestHeader("Accept","text/html");$("#alarm"+a).html("<img src='/images/mapLoad.gif' style='postion: abosulte; top: 50%;'/><br><span>deleting alert</span>")}});$.get("/alert/kill?q="+a,function(b){b=="success"?($("#alarm"+a).remove(),/[\S|oops]/i.test($("#currentAlarms").html())==!1&&$("#currentAlarms").html("You currently have no alerts")):($("#infoBox").html("oops something went wrong"),$("#accordion").accordion("option",
"active",0))});return!1}
function nextTimeQuery(a){jQuery.ajaxSetup({beforeSend:function(b){b.setRequestHeader("Accept","text/html");$("#infoBox").html("<img src='/images/mapLoad.gif' style='postion: abosulte; top: 50%;'/>")}});$.get("/alert/timequery?q="+a,function(b){if(b[0]=="$")$("#infoBox").html("We couldn't find that street.<br/>Please search again");else if(b[0]=="@"){b=b.split("@@");b=b[1];LAST_CNN!=""&&LAST_CNN!==b&&$("path#"+LAST_CNN).attr("stroke","rgb(0,255,0)");var a=$("path#"+b).attr("lid").split(","),c=parseFloat(a[1]),
a=parseFloat(a[0]);map.center({lat:c,lon:a});$("#infoBox").html("Please Select Street On Map")}else{var b=b.split("##"),e=b[0],b=b[1];LAST_CNN!=""&&LAST_CNN!==b&&$("path#"+LAST_CNN).attr("stroke","rgb(0,255,0)");LAST_CNN!=b&&($("path#"+b).attr("stroke","rgb(255,0,0)"),LAST_CNN=b);a=$("path#"+b).attr("lid").split(",");c=parseFloat(a[1]);a=parseFloat(a[0]);map.center({lat:c,lon:a});$("#infoBox").html(e);c="<button id=";c+=b;c+=' class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Make Alert</span></button>';
$("#infoBox").append(c)}$("#accordion").accordion("option","active",0)})}function getNextCleanTime(a){var b=$("#infoBox");jQuery.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Accept","text/html");b.html("<img src='/images/mapLoad.gif' style='postion: abosulte; top: 50%;'/>")}});LAST_CNN!=""&&LAST_CNN!==a&&$("path#"+LAST_CNN).attr("stroke","rgb(0,255,0)");LAST_CNN!=a&&(LAST_CNN=a,$.get("/alert/timecnn?q="+a,function(a){b.html(a)}));$("#accordion").accordion("option","active",0);return!1}
function showLocation(a){map.center({lat:a.coords.latitude,lon:a.coords.longitude})}function errorHandler(a){a.code==1?alert("Error: Access is denied!"):a.code==2&&alert("Error: Position is unavailable!")}function getGPSCoords(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showLocation,errorHandler,{enableHighAccuracy:!0}):alert("Sorry, browser does not support geolocation!")};